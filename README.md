# Terraform Provider for Platform9

The provider is built on top of the Platform9 Managed Kubernetes (PMK) platform, which is a managed Kubernetes service that provides a single pane of glass for managing multiple clusters.

## Using the Provider

Refer to the [documentation](https://registry.terraform.io/providers/platform9/pf9/latest/docs) on the Terraform Registry for detailed instructions on how to use this provier. You can also refer to the [docs](./docs/) for documentation of the development version.

## Development Setup

To set up your development environment, follow these steps:

1. Create a new file called `.terraformrc` in your home directory if it does not already exist.

2. Add the following `dev_overrides` block to your `.terraformrc` file

```terraform
provider_installation {
  dev_overrides {
    "platform9/pf9" = "<absolute-path-to-the-binary>"
  }
  direct {}
}
```
Replace `<absolute-path-to-the-binary>` with the absolute path to the binary of the provider. This will instruct Terraform to use the development version of the provider instead of the one from the registry.

3. Note that you dont need to run `terraform init` after adding the `dev_overrides` block to the `.terraformrc` file. Terraform will automatically use the development version of the provider when you run `terraform apply` or `terraform plan`.

4. If you have a Golang development environment set up, it is recommended to set `<absolute-path-to-the-binary>` to the path of the binary generated by running `go install .` in the root directory of the provider. For example, `/home/<username>/go/bin/terraform-provider-pf9`.

## Building the Provider

### Requirements

- [Terraform](https://www.terraform.io/downloads.html)
- [Golang](https://golang.org/doc/install) to build the provider plugin
- [VSCode](https://code.visualstudio.com/download) (optional, but recommended)
- [Make](https://www.gnu.org/software/make/) For running the Makefile
- [GoReleaser](https://goreleaser.com/install/) For creating releases

### Setting up Local Development Environment

1. Clone the repository to your local machine.
2. Open the project in VSCode
3. Use Makefile to build the provider plugin by running `make install` in the root directory of the provider. This will build the provider and install it in the default location, `/home/<username>/go/bin`.
4. Feel free to explore [`Makefile`](./Makefile) for other useful commands.

## Contributing

1. Clone this repository locally.
2. Make any changes you want in your cloned repository, and when you are ready to send those changes to us, push your changes to an upstream branch and [create a pull request](https://help.github.com/articles/creating-a-pull-request/).
3. Once your pull request is created, a reviewer will take responsibility for providing clear, actionable feedback. As the owner of the pull request, it is your responsibility to modify your pull request to address the feedback that has been provided to you by the reviewer(s).
4. After your review has been approved, it will be merged into to the repository.