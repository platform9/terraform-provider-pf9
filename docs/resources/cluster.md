---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "pf9_cluster Resource - Platform9 Pf9"
subcategory: ""
description: |-
  
---

# pf9_cluster Resource

This can be used to create, modify, and delete pf9 cluster.

## Example Usage

```terraform
# Used to manage cluster resource
resource "pf9_cluster" "example" {
  name = "example"
  master_nodes = [
    "17f9b392-67bb-43b9-b0b7-3b5821f683a6",
    "7f5aa992-0abe-40a0-9bf9-6a06ebb9ccfd",
    "a17fa56d-722b-4f10-8b50-ffa5a4bed36e"
  ]
  allow_workloads_on_master = false
  worker_nodes = [
    "2bfbc40e-1d72-4bfc-a46b-56b674862cc7",
    "bbbd1c20-3cda-405d-ae4b-d0337fffd6e1"
  ]
  master_ip                    = "10.149.107.237"
  master_vip_ipv4              = "10.149.107.237"
  master_vip_iface             = "ens3"
  containers_cidr              = "10.20.0.0/16"
  services_cidr                = "10.21.0.0/16"
  mtu_size                     = 1440
  privileged                   = true
  deploy_luigi_operator        = false
  use_hostname                 = false
  interface_detection_method   = "InterfaceName"
  interface_name               = "ens3"
  cpu_manager_policy           = "none"
  topology_manager_policy      = "none"
  calico_ip_ip_mode            = "Always"
  calico_nat_outgoing          = true
  calico_v4_block_size         = "26"
  calico_ipv4_detection_method = "interface=ens3"
  network_plugin               = "calico"
  runtime_config               = ""
  etcd_backup = {
    is_etcd_backup_enabled = true
  }
  monitoring = {
    retention_time = "7d"
  }
  tags = {
    "key1" = "value1"
    "key2" = "value2"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the cluster, applicable also for manual deploy

### Optional

- `allow_workloads_on_master` (Boolean) If the master nodes can run non-critical workloads
- `calico_ip_ip_mode` (String) IP-IP encapsulation mode for Calico network. Choose: Always, Never, CrossSubnet
- `calico_ipv4_detection_method` (String) Method to detect the IPv4 address
- `calico_nat_outgoing` (Boolean) Field is set to true if Calico nodes need to NAT north-south egress traffic.
- `calico_v4_block_size` (String) Subnet size per node for the Calico network, in CIDR notation (e.g. 26)
- `container_runtime` (String) Container runtime used by this cluster
- `containers_cidr` (String) CIDR used for pod IP addresses, applicable also for manual deploy
- `cpu_manager_policy` (String) options: none, static; default: none
- `deploy_luigi_operator` (Boolean) If set to true, deploy Luigi operator on the cluster
- `etcd_backup` (Attributes) (see [below for nested schema](#nestedatt--etcd_backup))
- `interface_detection_method` (String) Method to detect the interface
- `interface_name` (String) Name of the interface
- `kube_role_version` (String) kube role version to be used when bringing up the cluster.
- `master_ip` (String) IP of master node
- `master_nodes` (Set of String) List of uuid of master nodes
- `master_vip_iface` (String) If masterVipIpv4 is specified, this field is required. Specify the interface that the VIP attaches to
- `master_vip_ipv4` (String) API server Virtual IP that provides failover. When specified, deploy keepalived setup to cluster master nodes together
- `monitoring` (Attributes) (see [below for nested schema](#nestedatt--monitoring))
- `mtu_size` (Number) MTU for container network interfaces. Optional and used for the Calico network backend
- `network_plugin` (String) Network backend to use for container networking. Defaults to flannel. Supported choices are flannel, calico
- `node_pool_uuid` (String) UUID of the node pool used for the cluster, applicable also for manual deploy
- `privileged` (Boolean) True if cluster runs privileged containers
- `runtime_config` (String) Applicable also for manual deploy
- `services_cidr` (String) CIDR used for service IP addresses, applicable also for manual deploy
- `tags` (Map of String) User defined key-value pairs represented as a JSON object
- `topology_manager_policy` (String) options: none, best-effort, restricted, single-numa-node; default: none
- `use_hostname` (Boolean) If set to true nodes will be registered in the cluster using hostname instead of IP address. This option is only applicable to IPv4 hosts.
- `worker_nodes` (Set of String) List of uuid of worker nodes

### Read-Only

- `id` (String) UUID of the cluster

<a id="nestedatt--etcd_backup"></a>
### Nested Schema for `etcd_backup`

Optional:

- `daily_backup_time` (String) etcd backup Timestamp for daily backup, specified in format 'HH:MM'
- `is_etcd_backup_enabled` (Boolean) Set to true if etcd backup should be enabled, false otherwise
- `max_timestamp_backup_count` (Number) max number of Backups retention for Timestamp type backups, required if dailyBackupTime is provided
- `storage_local_path` (String) Path on the local filesystem where the etcd backup should be stored. For 'local' storage type only.
- `storage_type` (String) Type of storage to be used for etcd backup. Supported choices are local, s3, gcs


<a id="nestedatt--monitoring"></a>
### Nested Schema for `monitoring`

Optional:

- `retention_time` (String) Retention time for monitoring data

## Import

Import is supported using the following syntax:

```shell
# Use uuid of the cluster to import it into terraform
terraform import pf9_cluster.example d7727229-b2b4-4725-b0a0-473208f5093a
```
