---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "pf9_cluster Resource - Platform9 Pf9"
subcategory: ""
description: |-
  
---

# pf9_cluster Resource

This can be used to create, modify, and delete pf9 cluster.

## Example Usage

```terraform
# Used to manage cluster resource
resource "pf9_cluster" "example" {
  name = "example"
  master_nodes = [
    # node uuids of the nodes connected to PMK control plane
    "17f9b392-67bb-43b9-b0b7-3b5821f683a6",
    "7f5aa992-0abe-40a0-9bf9-6a06ebb9ccfd",
    "a17fa56d-722b-4f10-8b50-ffa5a4bed36e"
  ]
  allow_workloads_on_master = false
  worker_nodes = [
    "2bfbc40e-1d72-4bfc-a46b-56b674862cc7",
    "bbbd1c20-3cda-405d-ae4b-d0337fffd6e1"
  ]
  master_vip_ipv4              = "10.149.107.237"
  master_vip_iface             = "ens3"
  containers_cidr              = "10.20.0.0/16"
  services_cidr                = "10.21.0.0/16"
  interface_detection_method   = "InterfaceName"
  interface_name               = "ens3"
  network_plugin               = "calico"
  calico_ipv4_detection_method = "interface=ens3"
  etcd_backup = {
    is_etcd_backup_enabled = true
  }
  tags = {
    "key1" = "value1"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `etcd_backup` (Attributes) (see [below for nested schema](#nestedatt--etcd_backup))
- `master_nodes` (Set of String) List of uuid of master nodes
- `name` (String) Name of the cluster, applicable also for manual deploy
- `worker_nodes` (Set of String) List of uuid of worker nodes

### Optional

- `addon_operator_image_tag` (String) Tag of the addon operator image to be used for the cluster
- `addons` (Attributes Set) Addons to be installed on the cluster (see [below for nested schema](#nestedatt--addons))
- `allow_workloads_on_master` (Boolean) If the master nodes can run non-critical workloads
- `calico_controller_cpu_limit` (String) Corresponds to the CALICO_CONTROLLER_CPU_LIMIT environment variable in Calico.
- `calico_controller_memory_limit` (String) Corresponds to the CALICO_CONTROLLER_MEMORY_LIMIT environment variable in Calico.
- `calico_ip_ip_mode` (String) IP-IP encapsulation mode for Calico network. Choose: Always, Never, CrossSubnet
- `calico_ipv4_detection_method` (String) Method to detect the IPv4 address
- `calico_nat_outgoing` (Boolean) Field is set to true if Calico nodes need to NAT north-south egress traffic.
- `calico_node_cpu_limit` (String) Corresponds to the CALICO_NODE_CPU_LIMIT environment variable in Calico.
- `calico_node_memory_limit` (String) Corresponds to the CALICO_NODE_MEMORY_LIMIT environment variable in Calico.
- `calico_typha_cpu_limit` (String) Corresponds to the CALICO_TYPHA_CPU_LIMIT environment variable in Calico.
- `calico_typha_memory_limit` (String) Corresponds to the CALICO_TYPHA_MEMORY_LIMIT environment variable in Calico.
- `calico_v4_block_size` (String) Subnet size per node for the Calico network, in CIDR notation (e.g. 26)
- `cert_expiry_hrs` (Number) Number of hours before user certificates in kubeconfig expires, should be greater than 0 if set
- `container_runtime` (String) Container runtime used by this cluster
- `containers_cidr` (String) CIDR used for pod IP addresses, applicable also for manual deploy
- `cpu_manager_policy` (String) options: none, static; default: none
- `custom_registry_cert_path` (String)
- `custom_registry_password` (String)
- `custom_registry_repo_path` (String)
- `custom_registry_self_signed_certs` (Boolean)
- `custom_registry_skip_tls` (Boolean)
- `custom_registry_url` (String)
- `custom_registry_username` (String)
- `docker_private_registry` (String)
- `enable_etcd_encryption` (Boolean) Enables etcd encryption
- `external_dns_name` (String) Optional DNS name for API endpoint. This field is autogenerated when usePf9Domain is set, also applicable for manual deploy
- `gcr_private_registry` (String)
- `interface_detection_method` (String) Method to detect the interface
- `interface_name` (String) Name of the interface
- `k8s_private_registry` (String)
- `kube_role_version` (String) kube role version to be used when bringing up the cluster.
- `master_ip` (String) IP of master node
- `master_vip_iface` (String) If master_vip_ipv4 is specified, this field is required. Specify the interface that the VIP attaches to
- `master_vip_ipv4` (String) API server Virtual IP that provides failover. When specified, deploy keepalived setup to cluster master nodes together
- `mtu_size` (Number) MTU for container network interfaces. Optional and used for the Calico network backend
- `network_plugin` (String) Network backend to use for container networking. Defaults to flannel. Supported choices are flannel, calico
- `node_pool_uuid` (String) Optional. UUID of the node pool used for the cluster. Defaults to the first node pool of the local cloud provider type
- `privileged` (Boolean) True if cluster runs privileged containers
- `quay_private_registry` (String)
- `runtime_config` (String) Applicable also for manual deploy
- `services_cidr` (String) CIDR used for service IP addresses, applicable also for manual deploy
- `tags` (Map of String) User defined key-value pairs represented as a JSON object
- `topology_manager_policy` (String) options: none, best-effort, restricted, single-numa-node; default: none
- `use_hostname` (Boolean) If set to true nodes will be registered in the cluster using hostname instead of IP address. This option is only applicable to IPv4 hosts.

### Read-Only

- `calico_ipv4` (String)
- `calico_ipv6` (String)
- `calico_ipv6_detection_method` (String)
- `calico_ipv6_pool_block_size` (String)
- `calico_ipv6_pool_cidr` (String)
- `calico_ipv6_pool_nat_outgoing` (Boolean)
- `calico_router_id` (String)
- `cloud_provider_name` (String)
- `cloud_provider_type` (String)
- `cloud_provider_uuid` (String)
- `created_at` (String) Time at which the cluster was created
- `docker_centos_package_repo_url` (String)
- `docker_root` (String)
- `docker_ubuntu_package_repo_url` (String)
- `etcd_data_dir` (String)
- `etcd_election_timeout_ms` (Number)
- `etcd_heartbeat_interval_ms` (Number)
- `etcd_version` (String)
- `felix_ipv6_support` (Boolean)
- `flannel_iface_label` (String)
- `flannel_public_iface_label` (String)
- `id` (String) UUID of the cluster
- `interface_reachable_ip` (String)
- `ipv6` (Boolean)
- `k8s_api_port` (String)
- `last_ok` (String)
- `last_op` (String)
- `master_status` (String)
- `master_vip_vrouter_id` (String)
- `masterless` (Boolean)
- `node_pool_name` (String)
- `project_id` (String)
- `status` (String)
- `task_error` (String)
- `task_status` (String)
- `worker_status` (String)

<a id="nestedatt--etcd_backup"></a>
### Nested Schema for `etcd_backup`

Required:

- `is_etcd_backup_enabled` (Boolean) Set to true if etcd backup should be enabled, false otherwise

Optional:

- `daily_backup_time` (String) etcd backup Timestamp for daily backup, specified in format 'HH:MM'
- `interval_in_hours` (Number) etcd backup interval, specified in Hours. intervalInMins and intervalInHours are mutually exclusive
- `interval_in_mins` (Number) etcd backup interval, specified in minutes. intervalInMins and intervalInHours are mutually exclusive
- `max_interval_backup_count` (Number) max number of Backups retention for interval type backups, required if intervalInMins or intervalInHours is provided
- `max_timestamp_backup_count` (Number) max number of Backups retention for Timestamp type backups, required if dailyBackupTime is provided
- `storage_local_path` (String) Path on the local filesystem where the etcd backup should be stored. For 'local' storage type only.
- `storage_type` (String) Storage type for the etcd backup. Only 'local' is current supported type. 'local' saves backup to the node's local disk


<a id="nestedatt--addons"></a>
### Nested Schema for `addons`

Optional:

- `config` (Map of String)
- `enabled` (Boolean)
- `name` (String)
- `version` (String)

## Import

Import is supported using the following syntax:

```shell
# Use uuid of the cluster to import it into terraform
terraform import pf9_cluster.example d7727229-b2b4-4725-b0a0-473208f5093a
```
